-- MySQL Script generated by MySQL Workbench
-- Wed Jun 21 05:52:43 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`password`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`password` ;

CREATE TABLE IF NOT EXISTS `mydb`.`password` (
  `key` INT NOT NULL,
  `password_string` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`key`),
  UNIQUE INDEX `key_UNIQUE` (`key` ASC))
ENGINE = InnoDB;

INSERT INTO `password` VALUES 
(1, "Password"),
(2, "BlueDolphin42"),
(3, "BeardedCondor23");

-- -----------------------------------------------------
-- Table `mydb`.`department`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`department` ;

CREATE TABLE IF NOT EXISTS `mydb`.`department` (
  `deptID` INT   NOT NULL   AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `/staffNum` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`deptID`),
  UNIQUE INDEX `deptID_UNIQUE` (`deptID` ASC))
ENGINE = InnoDB;

INSERT INTO `department` VALUES	
(1, "Managerial Department", 1),
(2, "Inventory Department", 1),
(3, "Cashier Department", 1);

-- -----------------------------------------------------
-- Table `mydb`.`staff`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`staff` ;

CREATE TABLE IF NOT EXISTS `mydb`.`staff` (
  `SSN` INT NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  `email` VARCHAR(75) NOT NULL,
  `address` VARCHAR(45) NOT NULL,
  `job_description` VARCHAR(45) NOT NULL,
  `access_level` INT NULL,
  `password_key` INT NOT NULL,
  `department_deptID` INT NOT NULL,
  PRIMARY KEY (`SSN`),
  UNIQUE INDEX `SSN_UNIQUE` (`SSN` ASC),
  INDEX `fk_staff_password_idx` (`password_key` ASC),
  INDEX `fk_staff_department1_idx` (`department_deptID` ASC),
  CONSTRAINT `fk_staff_password`
    FOREIGN KEY (`password_key`)
    REFERENCES `mydb`.`password` (`key`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_staff_department1`
    FOREIGN KEY (`department_deptID`)
    REFERENCES `mydb`.`department` (`deptID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

INSERT INTO `staff` VALUES
(1, "David Mberingabo", "mberingabo.d@husky.neu.edu", "International Village", "Cashier", 3, 1, 3),
(2, "Samyak Jain", "jain.s@husky.neu.edu", "International Village", "Inventory Manager", 2, 2, 2),
(3, "Kathleen Durant", "durant.k@neu.edu", "Somewhere", "Manager", 1, 3, 1); 

-- -----------------------------------------------------
-- Table `mydb`.`asset`
-- Represents any good or service purchased by the company
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`asset` ;

CREATE TABLE IF NOT EXISTS `mydb`.`asset` (
  `assetID` INT NOT NULL   AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `description` VARCHAR(45) NOT NULL,
  `unit_price$` VARCHAR(45) NOT NULL,
  `category` VARCHAR(45) NULL,
  `expirery_date` DATE NULL,
  PRIMARY KEY (`assetID`))
ENGINE = InnoDB;

INSERT INTO `asset` VALUES
(1, "Shelve", "Wooden Shelve, 12X12 feet", 50, "Furniture", '2018-7-04'),
(2, "Table", "Wooden Table, 3X4 feet", 25, "Furniture", '2018-7-04'),
(3, "Chair", "Plastic and Leather Chairs, Black", 15, "Furniture", '2018-7-04'),
(4, "Computer", "HP Model S, Silver, HP", 1200, "Computer and Equipment", '2021-3-10'),
(5, "Truck", "Delivery Truck, GMC Truck Model V.12", 20000, "Vehicle", '2023-7-04'),
(6, "Cashier Station", "DELL Cashier Assistant 2017", 1500, "Furniture", '2018-7-04'),
(7, "Bananas", "Fruit", 12, "Fruit", '2017-7-04'),
(8, "Candy Bar", "Snack", 12, "Snack", '2018-7-04'),
(9, "Drink", "Drink", 12, "Drink", '2018-7-04'),
(10, "Cheese", "Dairy", 12, "Dairy", '2018-7-04'),
(11, "Toothbrush", "Hiegenic Product", 12, "Hiegenic Product", '2018-7-04');

-- -----------------------------------------------------
-- Table `mydb`.`capitalService`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`capitalService` ;

CREATE TABLE IF NOT EXISTS `mydb`.`capitalService` (
  `capitalServiceID` INT NOT NULL,
  `asset_assetID` INT NOT NULL,
  PRIMARY KEY (`asset_assetID`, `capitalServiceID`),
  CONSTRAINT `fk_capitalService_asset1`
    FOREIGN KEY (`asset_assetID`)
    REFERENCES `mydb`.`asset` (`assetID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`capitalGood`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`capitalGood` ;

CREATE TABLE IF NOT EXISTS `mydb`.`capitalGood` (
  `capitalGoodID` INT NOT NULL  AUTO_INCREMENT,
  `numOwned` VARCHAR(45) NOT NULL,
  `asset_assetID` INT NOT NULL,
  `department_deptID` INT,
  PRIMARY KEY (`capitalGoodID`, `asset_assetID`),
  INDEX `fk_capitalGood_asset1_idx` (`asset_assetID` ASC),
  INDEX `fk_capitalGood_department1_idx` (`department_deptID` ASC),
  CONSTRAINT `fk_capitalGood_asset1`
    FOREIGN KEY (`asset_assetID`)
    REFERENCES `mydb`.`asset` (`assetID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_capitalGood_department1`
    FOREIGN KEY (`department_deptID`)
    REFERENCES `mydb`.`department` (`deptID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

INSERT INTO `capitalGood` VALUES 
(1, 3, 1, null),
(2, 1, 2, null),
(3, 3, 3, null),
(4, 1, 4, 1),
(5, 1, 4, 2),
(6, 1, 5, 2),
(7, 1, 6, 3);
-- -----------------------------------------------------
-- Table `mydb`.`good`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`good` ;

CREATE TABLE IF NOT EXISTS `mydb`.`good` (
  `goodID` INT NOT NULL,
  `isleNum` VARCHAR(45) NULL,
  `stock` INT NOT NULL,
  `shelved` INT NOT NULL,
  `asset_assetID` INT NOT NULL,
  PRIMARY KEY (`goodID`, `asset_assetID`),
  INDEX `fk_good_asset1_idx` (`asset_assetID` ASC),
  CONSTRAINT `fk_good_asset1`
    FOREIGN KEY (`asset_assetID`)
    REFERENCES `mydb`.`asset` (`assetID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

INSERT INTO `good` VALUES	
(1, 2, 0, 25, 7), -- Banana
(2, 1, 500, 50, 8), -- Candy Bar
(3, 1, 1000, 200, 9), -- Drink
(4, 3, 5, 50, 10),
(5, 3, 200, 300, 11);
-- -----------------------------------------------------
-- Table `mydb`.`entry`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`entry` ;

CREATE TABLE IF NOT EXISTS `mydb`.`entry` (
  `entryID` INT NOT NULL,
  PRIMARY KEY (`entryID`))
ENGINE = InnoDB;

INSERT INTO `entry` VALUES
(1),
(2),
(3),
(4),
(5),
(6),
(7),
(8),
(9),
(10);

-- -----------------------------------------------------
-- Table `mydb`.`saleReceipt`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`saleReceipt` ;

CREATE TABLE IF NOT EXISTS `mydb`.`saleReceipt` (
  `saleID` INT NOT NULL,
  `date_time` VARCHAR(45) NULL,
  PRIMARY KEY (`saleID`))
ENGINE = InnoDB;

INSERT INTO `saleReceipt` VALUES
(1, "20120618 10:34:09"),
(2, "20120618 10:34:10");

-- -----------------------------------------------------
-- Table `mydb`.`saleEntry`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`saleEntry` ;

CREATE TABLE IF NOT EXISTS `mydb`.`saleEntry` (
  `entry_entryID` INT NOT NULL,
  `numSold` INT NOT NULL,
  `good_goodID` INT NOT NULL,
  `saleReceipt_saleID` INT NOT NULL,
  PRIMARY KEY (`saleReceipt_saleID`, `entry_entryID`),
  INDEX `fk_saleEntry_entry1_idx` (`entry_entryID` ASC),
  INDEX `fk_saleEntry_good1_idx` (`good_goodID` ASC),
  INDEX `fk_saleEntry_saleReceipt1_idx` (`saleReceipt_saleID` ASC),
  CONSTRAINT `fk_saleEntry_entry1`
    FOREIGN KEY (`entry_entryID`)
    REFERENCES `mydb`.`entry` (`entryID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_saleEntry_good1`
    FOREIGN KEY (`good_goodID`)
    REFERENCES `mydb`.`good` (`goodID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_saleEntry_saleReceipt1`
    FOREIGN KEY (`saleReceipt_saleID`)
    REFERENCES `mydb`.`saleReceipt` (`saleID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

INSERT INTO `saleEntry` VALUES
(1, 3, 1, 1),
(2, 1, 2, 1),
(3, 1, 3, 1),
(1, 2, 4, 2);

-- -----------------------------------------------------
-- Table `mydb`.`invoiceEntry`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`invoiceEntry` ;

CREATE TABLE IF NOT EXISTS `mydb`.`invoiceEntry` (
  `numReferenced` INT NOT NULL,
  `entry_entryID` INT NOT NULL,
  `invoice_invoiceID` INT NOT NULL,
  PRIMARY KEY (`entry_entryID`),
  INDEX `fk_invoiceEntry_entry1_idx` (`entry_entryID` ASC),
  INDEX `fk_invoiceEntry_invoice1_idx` (`invoice_invoiceID` ASC),
  CONSTRAINT `fk_invoiceEntry_entry1`
    FOREIGN KEY (`entry_entryID`)
    REFERENCES `mydb`.`entry` (`entryID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_invoiceEntry_invoice1`
    FOREIGN KEY (`invoice_invoiceID`)
    REFERENCES `mydb`.`invoice` (`invoiceID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`sentInvoice`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`sentInvoice` ;

CREATE TABLE IF NOT EXISTS `mydb`.`sentInvoice` (
  `buyerID` INT NOT NULL,
  `date_sent` DATE NULL,
  PRIMARY KEY (`buyerID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`receivedInvoice`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`receivedInvoice` ;

CREATE TABLE IF NOT EXISTS `mydb`.`receivedInvoice` (
  `vendorID` INT NOT NULL,
  `date_received` DATE NULL,
  `invoiceID` INT NOT NULL,
  
  CONSTRAINT fk_receiveInvoice_invoice
	foreign key (invoiceID)
    REFERENCES `mydb`.`invoice` (invoiceID),
  PRIMARY KEY (`vendorID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`invoice`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`invoice` ;

CREATE TABLE IF NOT EXISTS `mydb`.`invoice` (
  `invoiceID` INT NOT NULL PRIMARY KEY,
  `amount` INT NOT NULL,
  `due_date` VARCHAR(45) NOT NULL,
  `invoiceEntries` VARCHAR(45) NULL)
ENGINE = InnoDB;




-- -----------------------------------------------------
-- Table `mydb`.`businessPartner`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`businessPartner` ;

CREATE TABLE IF NOT EXISTS `mydb`.`businessPartner` (
  `bpID` INT NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  `businessAddress` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `netAccount` INT NOT NULL,
  PRIMARY KEY (`bpID`))
ENGINE = InnoDB;



SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
